{% extends "addman/base.html" %}

{% block head_extras %}

    <script>
        $(document).ready(function () {
            $("#addresses").DataTable({
                dom: 'Biltp',
                buttons: [
                    'copy',
                    'csv',
                    'excel',
                    'pdf'
                ]
            });
        });
    </script>

{% endblock %}

{% block title %}
    All Addresses
{% endblock %}

{% block page_content %}

    {% if messages %}
        {% for message in messages %}
            <p><strong>{{ message }}</strong></p>
        {% endfor %}
    {% endif %}



    <form action="{% url 'addman:all_addresses' %}" method="get">

        <div class="form-group">

            {{ address_set_select_form }}
        </div>


        <input type="submit" class="btn btn-primary" value="Change"/>
    </form>

    {% if all_addresses_list %}
        <table id='addresses' class='table table-striped'>
            <thead>
            <tr>
                <th>pk</th>
                <th>Address</th>
                <th>Creation time</th>
                <th>Address set</th>
                <th>Validation Status</th>
                <th>Validation Message</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            {% for address in all_addresses_list %}
                <tr>
                    <td>{{ address.id }}</td>
                    <td class="border-left-{{ address.status }}">
                        <a href="{% url 'addman:address_detail' address.pk %}">
                            {{ address|safe }}
                        </a>
                    </td>
                    <td>{{ address.creation_time }}</td>
                    <td>{{ address.address_set }}</td>
                    <td>{{ address.status }}</td>
                    <td>{{ address.message }}</td>
                    <td class="validate-cell"><a href="#!">Validate</ah></td>
                </tr>
            {% endfor %}

            </tbody>
        </table>
    {% else %}
        <p>No addresses are available.</p>
    {% endif %}

    <script src="https://cdn.datatables.net/buttons/1.1.2/js/dataTables.buttons.min.js"></script>
    <script src="//cdn.datatables.net/buttons/1.1.2/js/buttons.flash.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <script src="//cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
    <script src="//cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
    <script src="//cdn.datatables.net/buttons/1.1.2/js/buttons.html5.min.js"></script>
    <script src="//cdn.datatables.net/buttons/1.1.2/js/buttons.print.min.js"></script>
    <link rel="stylesheet" href="
https://cdn.datatables.net/buttons/1.1.2/css/buttons.dataTables.min.css">

{% endblock %}
