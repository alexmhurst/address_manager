{% extends "addman/base.html" %}

{% block head_extras %}

    <script>
        $(document).ready(function () {
            $("#addresses").DataTable();
        });
    </script>

{% endblock %}

{% block title %}
    All Addresses
{% endblock %}

{% block page_content %}

    {% if messages %}
        {% for message in messages %}
            <p><strong>{{ message }}</strong></p>
        {% endfor %}
    {% endif %}



    <form action="{% url 'addman:all_addresses' %}" method="get">

        <div class="form-group">

            {{ address_set_select_form }}
        </div>


        <input type="submit" class="btn btn-primary" value="Change"/>
    </form>

    {% if all_addresses_list %}
        <table id='addresses' class='table table-striped'>
            <thead>
            <tr>
                <th>Address</th>
                <th>Creation time</th>
                <th>Address set</th>
                <th>Validation Status</th>
                <th>Validation Message</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
                {% for address in all_addresses_list %}
                    <tr>
                        <td class="border-left-{{ address.status }}" >
                            <a href="{% url 'addman:address_detail' address.pk %}" >
                                {{ address|safe }}
                            </a>
                        </td>
                        <td>{{ address.creation_time }}</td>
                        <td>{{ address.address_set }}</td>
                        <td>{{ address.status }}</td>
                        <td>{{ address.message }}</td>
                        <td><a href="{% url 'addman:validate' address.pk %}">Validate</a></td>
                    </tr>
                {% endfor %}

            </tbody>
        </table>
    {% else %}
        <p>No addresses are available.</p>
    {% endif %}

{% endblock %}
